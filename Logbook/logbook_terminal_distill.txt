 加速
source /etc/network_turbo
、
----------------------------------------------------------------------
      mambaloc蒸馏到efficientnet posenet的
----------------------------------------------------------------------

#蒸馏得到学生
# heads
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv --use_mamba True --scene heads --return_feature True --checkpoint_path /home/transposenet/out_best_transposenet/7scenes_best_paper_use/run_02_08_24_18_34_heads_mamba_skip_1_checkpoint-16.pth

# chess
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_chess_test.csv --use_mamba True --scene chess --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_19_08_chess_mamba_skip_1_checkpoint-30.pth

# pumpkin
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_pumpkin_test.csv --use_mamba True --scene pumpkin --return_feature True --checkpoint_path /home/transposenet/out/run_03_08_24_00_15_pumpkin_mamba_skip_1_checkpoint-28.pth

# office
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_office_test.csv --use_mamba True --scene office --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_22_31_office_mamba_skip_1_checkpoint-18.pth


----------------------------------------------------------------------
    Transposenet蒸馏到efficientnet posenet的
----------------------------------------------------------------------

#蒸馏得到学生

# heads
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv --scene heads --return_feature True --checkpoint_path /home/transposenet/out/run_03_08_24_05_22_heads_skip_1_checkpoint-500.pth

Performance of /home/transposenet/out/run_03_08_24_05_25_heads_skip_1_checkpoint-200.pth on /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv
Median pose error: 0.2995389401912689[m], 9.82812213897705[deg]
Mean inference time: 11.439445495605469

# chess
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_chess_test.csv --scene chess --return_feature True --checkpoint_path /home/transposenet/out/run_03_08_24_05_22_chess_skip_1_checkpoint-200.pth


# pumpkin
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_pumpkin_test.csv --scene pumpkin --return_feature True --checkpoint_path /home/transposenet/out/run_03_08_24_05_22_pumpkin_skip_1_checkpoint-100.pth

Performance of /home/transposenet/out/run_03_08_24_05_25_pumpkin_skip_1_checkpoint-100.pth on /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_pumpkin_test.csv
Median pose error: 0.24631328880786896[m], 11.461428165435791[deg]
Mean inference time: 11.296014070510864


# office
python main_distill_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_office_test.csv --scene office --return_feature True --checkpoint_path /home/transposenet/out/run_03_08_24_05_23_office_skip_1_checkpoint-200.pth

Performance of /home/transposenet/out/run_03_08_24_05_25_office_skip_1_checkpoint-200.pth on /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_office_test.csv
Median pose error: 0.17903760075569153[m], 7.661050796508789[deg]
Mean inference time: 11.333553647994995


----------------------------------------------------------------------
    来自mapnet的posenet 蒸馏到efficientnet posenet的
----------------------------------------------------------------------
# heads
python main_distill_efficientnet_from_posenet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv --scene heads --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_21_02_heads_skip_1_posenet_checkpoint-500.pth
 


# chess
python main_distill_efficientnet_from_posenet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_chess_test.csv --scene chess --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_21_02_chess_skip_1_posenet_checkpoint-300.pth
 

# pumpkin
python main_distill_efficientnet_from_posenet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_pumpkin_test.csv --scene pumpkin --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_21_03_pumpkin_skip_1_posenet_checkpoint-200.pth



# office
python main_distill_efficientnet_from_posenet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_office_test.csv --scene office --return_feature True --checkpoint_path /home/transposenet/out/run_02_08_24_21_03_office_skip_1_posenet_checkpoint-200.pth







------------------------------
  纯efficientnet
  -------------------------

#heads
python main_posenet_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_train.csv --scene heads

#chess
python main_posenet_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_chess_train.csv --scene chess


#office
python main_posenet_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_office_train.csv --scene office

#pumpkin
python main_posenet_efficientnet.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_pumpkin_train.csv --scene pumpkin


--------------------------------------------------------------------------------
                              之前的，不用论文里
--------------------------------------------------------------------------------



----------------------------------------------------------------------
        之前mambaloc蒸馏到transposenet的
----------------------------------------------------------------------

#预训练老师
python main.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_train.csv --use_mamba True --scene heads

Performance of /home/transposenet/out_best_transposenet/run_19_07_24_14_14_heads_checkpoint-99.pth on /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv
Median pose error: 0.13228029757738113[m], 12.369444370269775[deg]
Mean inference time: 11.69103717803955

#蒸馏得到学生
# heads
python main_terminal_distill.py transposenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_train.csv --use_mamba True --scene heads --return_feature True
python main_terminal_distill.py transposenet test ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv --checkpoint_path_student /home/transposenet/out_best_transposenet/student/run_19_07_24_18_18_heads_checkpoint-4.pth

存的
Performance of /home/transposenet/out/run_19_07_24_18_18_heads_checkpoint-4.pth on /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_test.csv
Median pose error: 0.13468899577856064[m], 14.105926990509033[deg]
Mean inference time: 10.8153977394104

CPU上不用onnx
[19-07-24 18:33] [INFO] [main_terminal_distill.py():379] - Median pose error: 0.134[m], 14.090[deg]
[19-07-24 18:33] [INFO] [main_terminal_distill.py():380] - Var pose error: 0.007[m], 48.254[deg]
[19-07-24 18:33] [INFO] [main_terminal_distill.py():382] - Mean inference time:70.70[ms]


画图
python main_terminal_distill.py posenet train ./models/backbones/efficient-net-b0.pth /home/transposenet/data/7Scenes /home/transposenet/datasets123/7Scenes/abs_7scenes_pose.csv_heads_train.csv --use_mamba True --scene heads --return_feature True --return_feature_plot True